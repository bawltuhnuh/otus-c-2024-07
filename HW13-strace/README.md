Системные вызовы в strace процесса `top`
==========================================

1. Работа с файловой системой /proc
------------------------------------
- newfstatat(AT_FDCWD, "/proc/82843", …)
    Проверка типа и прав доступа к каталогу процесса.
- openat(..., "/proc/82843/stat", O_RDONLY)
    Открытие файла `stat`, содержащего информацию о процессе.
- read(…, 1024) / close(…)
    Чтение данных и закрытие файла.

Аналогично читаются:
- /proc/82843/statm — информация о памяти
- /proc/uptime — время работы системы
- /proc/loadavg — загрузка CPU

Также:
- access("/var/run/utmpx", F_OK)
    Проверка существования файла `utmpx` (учёт логинов).
- openat(..., "/var/run/utmp", O_RDONLY|O_CLOEXEC)
    Чтение информации о пользователях из `utmp`.

2. Навигация по файловым дескрипторам
-------------------------------------
- getdents64(6, …)
    Чтение содержимого каталога (по дескриптору 6).
- lseek(4 or 5, 0, SEEK_SET)
    Перемещение указателя файла в начало перед повторным чтением.
- read(…)
    Чтение данных из файла.

3. Управление сигналами и таймерами
------------------------------------
- alarm(0), alarm(10)
    Сброс и установка одноразового таймера SIGALRM.
- rt_sigaction(SIGALRM, …)
    Назначение обработчика сигнала для обновления интерфейса.

4. Блокировки и чтение с оффсетом
----------------------------------
- fcntl(6, F_SETLKW, {l_type=F_RDLCK, …})
    Установка блокировки на чтение файла `utmp`.
- pread64(6, buf, 384, offset)
    Чтение записи от конкретного смещения без сдвига позиции.
- fcntl(…, F_UNLCK, …)
    Снятие блокировки после чтения.

Цикл: alarm → sigaction → fcntl → pread → fcntl повторяется каждые 10 секунд.

5. Вывод на экран
------------------
- write(1, "...", 2048)
    Вывод интерфейса `top` в терминал (stdout).
    Несколько вызовов — для заголовков, таблиц и пр.

Итоговая таблица
-----------------

| Группа вызовов                   | Операции                  | Назначение                                     |
|----------------------------------|----------------------------|------------------------------------------------|
| stat, openat, read, close        | Чтение /proc/*             | Данные о процессах, памяти, загрузке           |
| getdents64, lseek                | Навигация                  | Повторное чтение, переходы в файле            |
| access, openat                   | Работа с utmp              | Учёт вошедших пользователей                    |
| alarm, rt_sigaction              | Таймеры, сигналы           | Обновление интерфейса top                      |
| fcntl, pread64                   | Блокировки, чтение         | Безопасный доступ к файлам                     |
| write                            | Вывод в stdout             | Отображение информации пользователю            |
